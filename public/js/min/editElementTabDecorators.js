$(document).ready(function(){(function(b){b.TabDecorators={emptyList:"There is no custom validators, the default one will be used. Be careful, if you set one, every default decorators will be removed and you'll have to set everyting.",newLineId:-1,init:function(a){b.TabDecorators.initComponents(a)},initComponents:function(a){var c=b("#decoratorsArea #decoratorClass"),d=b("#decoratorsArea #decoratorOptions"),e=b("#decoratorsArea #decId");b("#decList").html(b.TabDecorators.emptyList);b.TabDecorators.loadList(a);
b.TabDecorators.initFields();b("#decoratorsArea #decSubmit").unbind().click(function(a){a.preventDefault();e.val()>0?b.TabDecorators.updateDec(e.val(),c.val(),d.val()):b.TabDecorators.addDec(c.val(),d.val())});c.val("").autocomplete({minLength:0,source:["ViewHelper","HtmlTag","Description","Errors","Label","Fieldset","ViewScript","File","Form","FormElements","FormErrors","Image","Captcha","DtDdWrapper","PrepareElements","Callback"]});d.val("").autocomplete({minLength:0,source:["array('tag' => '')",
"array('placement' => '')","array('separator' => '')","array('tag' => '', 'placement' => 'prepend')","array('tag' => '', 'separator' => '')","array('tag' => '', 'placement' => 'prepend', 'separator' => '')","array('placement' => '', 'separator' => '')","array('viewScript' => '_file.phtml')","array('tag' => '', 'class' => '')","array('tag' => '', 'class' => '', 'placement' => 'prepend')","array('tag' => '', 'class' => '', 'separator' => '')","array('tag' => '', 'class' => '', 'separator' => '', 'placement' => 'prepend')",
"array('class' => '')","array('class' => '', 'placement' => '')","array('class' => '', 'separator' => '')","array('class' => '', 'placement' => '', 'separator' => '')"]})},initFields:function(){b("#decoratorsArea #decId").val(b.TabDecorators.newLineId);b("#decoratorsArea #decoratorOptions").val("").unbind("keyup").keyup(function(a){a.keyCode=="13"&&b("#decoratorsArea #decSubmit").click()});b("#decoratorsArea #decoratorClass").val("").focus().unbind("keyup").keyup(function(a){a.keyCode=="13"&&b("#decoratorsArea #decSubmit").click()})},
loadList:function(a){if(typeof a.decorators!="undefined"&&typeof a.decorators.decorator!="undefined"){if(a.decorators.decorator instanceof Array)var c=a.decorators.decorator;else c=[],c.push(a.decorators.decorator);for(var d in c)a={decId:c[d].id,decClass:c[d].name,decOptions:c[d].options},b.TabDecorators.addDecCallback(a)}},addDec:function(a,c){a=jQuery.trim(a);c=jQuery.trim(c);param={formFilename:b.ElementManager.getFormFilename(),idElement:b.TabGeneral.getElementId(),decClass:a,decOptions:c};a.length>
0?b.ajaxCalls.addDecorator(param):b.Tools.alert("Empty fields","Please at least fulfill the decorator name.")},addDecCallback:function(a){var c=b.TabDecorators.getNewLine(a.decId,a.decClass,a.decOptions),d=b("#decList");b("#decList:contains("+b.TabDecorators.emptyList+")").length>0&&d.html("");d.append(c);c=d.children(".lineWrapper").last();b.TabDecorators.setLine(c,a)},getNewLine:function(){return'<div class="lineWrapper"><div class="line"><input type="hidden" class="lineId" value="" /><div class="actions"><img src="/images/zfm/decoratorDelete.png" alt="Delete" title="Delete"></div><div class="decClass"></div><div class="decOptions"></div><div class="cleaner"></div></div><div class="spacer_v15"></div></div>'},
setLine:function(a,c){a.children().children(".lineId").val(c.decId);a.children().children(".decOptions").text(c.decOptions);a.children().children(".decClass").text(c.decClass);a.children(".line").click(function(){if(typeof c.decOptions.length=="undefined")c.decOptions="";b("#decoratorsArea #decoratorClass").val(c.decClass);b("#decoratorsArea #decoratorOptions").val(c.decOptions);b("#decoratorsArea #decId").val(c.decId)});a.children(".line").children(".actions").click(function(a){a.stopImmediatePropagation();
b.TabDecorators.deleteDec(b(this).parent())});a.effect("highlight");b.TabDecorators.initFields();b.ElUpdateManager.refreshElement(c.idElement,c.elementRendered)},updateDec:function(a,c,d){c=jQuery.trim(c);d=jQuery.trim(d);param={formFilename:b.ElementManager.getFormFilename(),idElement:b.TabGeneral.getElementId(),decId:a,decClass:c,decOptions:d};c.length>0?b.ajaxCalls.updateDecorator(param):b.Tools.alert("Empty fields","Please at least fulfill the decorator name.")},updateDecCallback:function(a){var c=
b("#decoratorsArea .line .lineId[value='"+a.decId+"']").parent().parent();b.TabDecorators.setLine(c,a);b.TabDecorators.initFields();b.ElUpdateManager.refreshElement(a.idElement,a.elementRendered)},deleteDec:function(a){var c=a.children(".lineId").val();confirm("Do you really want to delete the decorator "+a.children(".decClass").text()+" (id = "+c+")")&&(param={formFilename:b.ElementManager.getFormFilename(),idElement:b.TabGeneral.getElementId(),decId:c},b.ajaxCalls.deleteDecorator(param,a))},deleteDecCallback:function(a,
c){c.parent().effect("explode");c.parent().remove();b.Tools.showMessage("success","The decorators "+a.decClass+" has successfully been deleted.");b.TabDecorators.initFields();b.ElUpdateManager.refreshElement(a.idElement,a.elementRendered)}}})(jQuery)});