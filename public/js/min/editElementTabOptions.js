$(document).ready(function(){(function(a){a.TabOptions={init:function(b){var c=b["@attributes"].type;a.TabOptions.initTabForm(c);a.TabOptions.initComponents(c,b)},initTabForm:function(b){switch(b){case "captcha":case "image":case "file":case "hash":a.ajaxCalls.getTabOptionsForm({type:b});break;case "select":case "radio":case "multiselect":case "multicheckbox":break;default:a("#specialsArea").html("There is no special option for this element.")}},initTabFormCallback:function(b){a("#specialsArea").html(b.form)},
initComponents:function(b,c){switch(b){case "captcha":var d=a("#fieldset-captchaImage"),e=a("#fieldset-recaptcha");a.TabOptions.setElement("#optionsArea #captchaWordLen","wordLen",c);a.TabOptions.setElement("#optionsArea #captchaTimeout","timeout",c);a.TabOptions.setElement("#optionsArea #captchaUseNumbers","useNumbers",c);a.TabOptions.setElement("#optionsArea #captchaSessionClass","SessionClass",c);a.TabOptions.setElement("#optionsArea #captchaSession","session",c);a.TabOptions.setElement("#optionsArea #captchaAdapter",
"adapter",c);a.TabOptions.setElement("#optionsArea #captchaExpiration","expiration",c);a.TabOptions.setElement("#optionsArea #captchaGcFreq","gcFreq",c);a.TabOptions.setElement("#optionsArea #captchaFont","font",c);a.TabOptions.setElement("#optionsArea #captchaFontSize","fontSize",c);a.TabOptions.setElement("#optionsArea #captchaHeight","height",c);a.TabOptions.setElement("#optionsArea #captchaWidth","width",c);a.TabOptions.setElement("#optionsArea #captchaImgDir","imgDir",c);a.TabOptions.setElement("#optionsArea #captchaImgUrl",
"imgUrl",c);a.TabOptions.setElement("#optionsArea #captchaSuffix","suffix",c);a.TabOptions.setElement("#optionsArea #captchaDotNoiseLevel","dotNoiseLevel",c);a.TabOptions.setElement("#optionsArea #captchaLineNoiseLevel","lineNoiseLevel",c);a.TabOptions.setElement("#optionsArea #captchaPubKey","pubKey",c);a.TabOptions.setElement("#optionsArea #captchaPrivKey","privKey",c);a.TabOptions.setElement("#optionsArea #captchaService","service",c);var f=a("#optionsArea #captchaAdapter");f.change(function(){d.hide();
e.hide();a(this).val()=="Image"&&d.show();a(this).val()=="ReCaptcha"&&e.show()});f.val()=="Image"?d.show():d.hide();f.val()=="ReCaptcha"?e.show():e.hide();a(".optionHelp").tooltip();a("#multioptions").hide();break;case "image":a.TabOptions.setElement("#optionsArea #imgPath","src",c);a.TabOptions.setElement("#optionsArea #imgValue","imgValue",c);a("#multioptions").hide();break;case "file":a.TabOptions.setElement("#optionsArea #fileDest","destination",c);a.TabOptions.setElement("#optionsArea #fileValueDisabled",
"valueDisabled",c);a.TabOptions.setElement("#optionsArea #fileMulti","multiFile",c);a("#multioptions").hide();break;case "hash":a.TabOptions.setElement("#optionsArea #hashSalt","salt",c);a.TabOptions.setElement("#optionsArea #hashTimeOut","timeout",c);a.TabOptions.setElement("#optionsArea #hashSession","session",c);a("#multioptions").hide();break;case "select":case "radio":case "multiselect":case "multicheckbox":a("#specialsArea").html("");a("#multioptions").show();a.TabOptions.initMultiOptionsComponents(c);
break;default:a("#multioptions").hide()}},setElement:function(b,c,d){var e=d.id,f=a.ElementManager.getFormFilename(),d=typeof d.spec!="undefined"&&typeof d.spec[c]!="undefined"?d.spec[c]:"";d.length==null&&(d="");a(b).attr("type")=="checkbox"?a(b).attr("checked",d!="false"):a(b).val(d);a(b).unbind();a(b).bind("change",function(){var d=a(this).attr("type")=="checkbox"?a(this).is(":checked"):a(this).val(),d={id:e,newValue:d,property:c,formFilename:f};a(b).parent().parent().children(".description").html(a.ZFM.images.filedUpdateInProgress);
a.ajaxCalls.updateElementOptionValue(d,a(b))})},updateElementValueCallback:function(b,c,d){d.parent().parent().children(".description").html(a.ZFM.images.fieldUpToDate);a.ElUpdateManager.refreshElement(b,c)},initMultiOptionsComponents:function(b){a("input#multioptionsText").unbind().change(function(){a.TabOptions.updateOptionValue("text",a(this))});a("input#multioptionsValue").unbind().change(function(){a.TabOptions.updateOptionValue("value",a(this))});a("input#multioptionsChecked").unbind().change(function(){a.TabOptions.updateOptionValue("checked",
a(this))});a("#addOptionButton").unbind().click(function(){a.TabOptions.addSelectedOption()});a("#deleteOptionButton").unbind().click(function(){a.TabOptions.removeSelectedOption()});a("input#addOption").keyup(function(b){b.keyCode=="13"&&a.TabOptions.addSelectedOption()});a.TabOptions.fillSelectedOptions(b.multioptions)},fillSelectedOptions:function(b){if(b!=null&&typeof b.option!="undefined"){b.option.length>1?b=b.option:b[0]=b.option;for(var c in b)a.TabOptions.addSelectedOptionCallback({option:b[c]})}},
fillTab:function(b){a("#optionsArea #multioptionsId").val(b.id);a("#optionsArea #multioptionsText").val(b.text);a("#optionsArea #multioptionsValue").val(b.value);a("#optionsArea #multioptionsChecked").prop("checked",b.checked!="false")},addSelectedOption:function(){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),text:a("input#addOption").val()};jQuery.trim(b.text)==""&&a.Tools.alert("Empty","Please fill the field.");a(a.ZFM.selectors.optionSelected+" :contains('"+
b.text+"')").length==0&&a.ajaxCalls.addMultiOption(b)},addSelectedOptionCallback:function(b){b.option.id=b.option["@attributes"].id;var c=a(a.ZFM.selectors.optionSelected+":has(option)").length==0;c&&a.TabOptions.enableTab();a("input#addOption").val("");a(a.ZFM.selectors.optionSelected).addOption(b.option.id,b.option.text,!1);var d=a(a.ZFM.selectors.optionSelected+" option:last");d.click(function(){a.TabOptions.fillTab(b.option)});c&&d.attr("selected",!0).focus().click();a.ElUpdateManager.refreshElement(b.idElement,
b.elementRendered)},removeSelectedOption:function(){if(a(a.ZFM.selectors.optionSelected).selectedOptions().length==1){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),idOption:a.TabOptions.getOptionId()};a.ajaxCalls.removeMultiOption(b)}},removeSelectedOptionCallback:function(b){a(a.ZFM.selectors.optionSelected+" option:selected").remove();a(a.ZFM.selectors.optionSelected+":has(option)").length==0?a.TabOptions.disableTab():a(a.ZFM.selectors.optionSelected+" option:last").attr("selected",
!0).focus().click();a.ElUpdateManager.refreshElement(b.idElement,b.elementRendered)},updateOptionValue:function(b,c){var d=c.attr("type")=="checkbox"?c.is(":checked"):c.val(),d={formFilename:a.ElementManager.getFormFilename(),idElement:a.TabGeneral.getElementId(),idOption:a.TabOptions.getOptionId(),propertyName:b,propertyValue:d};c.parent().parent().children(".description").html(a.ZFM.images.filedUpdateInProgress);a.ajaxCalls.updateOptionValue(d,c)},updateOptionValueCallback:function(b,c){c.parent().parent().children(".description").html(a.ZFM.images.fieldUpToDate);
var d=a(a.ZFM.selectors.optionSelected+" option[value='"+b.idOption+"']");b.propertyName=="text"&&d.text(b.propertyValue);b.option.id=b.idOption;d.unbind().click(function(){a.TabOptions.fillTab(b.option)});a.ElUpdateManager.refreshElement(b.idElement,b.elementRendered)},getOptionId:function(){return a("#multioptionsId").val()},disableTab:function(){a(a.ZFM.selectors.optionSelected).html("");a("#optionsArea #multioptionsText").val("");a("#optionsArea #multioptionsValue").val("");a("#optionsArea #multioptionsChecked").attr("checked",
!1);a("#optionsArea #multioptionsText").attr("disabled",!0);a("#optionsArea #multioptionsValue").attr("disabled",!0);a("#optionsArea #multioptionsChecked").attr("disabled",!0)},enableTab:function(){a("#multioptionsText").removeAttr("disabled");a("#multioptionsValue").removeAttr("disabled");a("#multioptionsChecked").removeAttr("disabled")}}})(jQuery)});