$(document).ready(function(){(function(a){a.TabFilters={init:function(b){a.TabFilters.disableTab();a.TabFilters.fillSelectedFilters(typeof b.filters!="undefined"?b.filters:null);a.TabFilters.initComponents()},initComponents:function(){a(".filtersHelpDialog").dialog({autoOpen:!1,width:400,height:400});a("#dialogForm #filtersArea #config .filtersHelper img").click(function(){a(".filtersHelpDialog").dialog("open")});a("#addFilterButton").unbind().click(function(){a.TabFilters.addSelectedFilter()});a("#deleteFilterButton").unbind().click(function(){a.TabFilters.removeSelectedFilter()});
a("#filterConstruct").unbind().autocomplete({minLength:0,autoFocus:!0,source:[],change:function(){a.TabFilters.updateFilterValue("constructor",a(this))}}).keyup(function(b){if(b.keyCode=="13")return b.preventDefault(),a("#filterConstruct").blur(),null})},fillHelpDialog:function(b){if(typeof b.help=="undefined")return a(".filtersHelpDialog").html("There is no specific help for this filter."),!1;if(b.help.options instanceof Array==!1){var c=[];c.push(b.help.options)}else c=b.help.options;for(var b=
"",d=0;d<c.length;d++){b+="<fieldset><legend>"+c[d]["@attributes"]["for"]+"</legend>";for(var e=0;e<c[d].option.length;e++)b+=c[d].option[e]+"<br/>";b+="</fieldset>"}b==""&&(b="There is no specific help for this validaror.");a(".filtersHelpDialog").html(b)},enableDisableFileFilters:function(b,c){for(var d in b)a("select#addFilter option:contains("+b[d]+")").prop("disabled",c!="file")},fillSelectedFilters:function(b){if(b!=null&&typeof b.filter!="undefined"){b.filter.length>1?b=b.filter:b[0]=b.filter;
for(var c in b)a.TabFilters.addSelectedFilterCallback(b[c])}},fillTab:function(b){b={name:b.name,knownDatas:b};typeof b.name!="undefined"?a.ajaxCalls.getFilterDatas(b):console.log("fillTab called without a classname ... there is probably no filters selected or something wierder.")},fillTabCallback:function(b,c){for(var d in c)if(c[d].length==null||typeof c[d]=="undefined")c[d]="";a.TabFilters.fillHelpDialog(b);a("#filtersArea #description #className").prop("href",b.link).text(c.name);a("#filtersArea #filterConstruct").val(c.constructor);
a("#filtersArea #description #classDescription").text(b.desc);typeof b.codes=="undefined"||typeof b.codes.code=="undefined"?a("#filtersArea #filterConstruct").autocomplete("option","source",[]):(b.codes.code instanceof Array?d=b.codes.code:(d=[],d[0]=b.codes.code),a("#filtersArea #filterConstruct").autocomplete("option","source",d))},addSelectedFilter:function(){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a("select#addFilter").val()};a(a.ZFM.selectors.filterSelected).containsOption(b.name)||
a.ajaxCalls.addFilter(b)},addSelectedFilterCallback:function(b){var c=a(a.ZFM.selectors.filterSelected+":has(option)").length==0;c&&a.TabFilters.enableTab();a("select#addFilter option:contains("+b.name+")").prop("disabled",!0);a(a.ZFM.selectors.filterSelected).addOption(b.name,b.name,!1);var d=a(a.ZFM.selectors.filterSelected+" option:last");d.click(function(){a.TabFilters.fillTab(b)});c&&d.prop("selected",!0).click()},removeSelectedFilter:function(){if(a(a.ZFM.selectors.filterSelected).selectedOptions().length==
1){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a(a.ZFM.selectors.filterSelected).val()};a.ajaxCalls.removeFilter(b)}},removeSelectedFilterCallback:function(b){a(a.ZFM.selectors.filterSelected).removeOption(b.name);a("select#addFilter option:contains("+b.name+")").removeAttr("disabled");a(a.ZFM.selectors.filterSelected+":has(option)").length==0?a.TabFilters.disableTab():(a(a.ZFM.selectors.filterSelected+" option").removeAttr("selected"),a(a.ZFM.selectors.filterSelected+
" option:last").prop("selected",!0).focus().click())},updateFilterValue:function(b,c){var d=c.prop("type")=="checkbox"?c.is(":checked"):c.val(),d={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a.TabFilters.getClassName(),propertyName:b,propertyValue:d};c.parent().parent().children(".description").html(a.ZFM.images.filedUpdateInProgress);a.ajaxCalls.updateFilterValue(d,c)},updateFilterValueCallback:function(b){b.parent().parent().children(".description").html(a.ZFM.images.fieldUpToDate)},
disableTab:function(){a("#filtersList").html("");a("select#addFilter option").removeAttr("disabled");a("#filtersArea #description #className").text("Zend_Filter_Class");a("#filtersArea #description #classDescription").text("Please select a filter");a("#filtersArea #filterConstruct").val("");a("#filtersArea #filterConstruct").prop("disabled",!0)},enableTab:function(){a("#filtersArea #filterConstruct").removeAttr("disabled")},getClassName:function(){return a("select#filtersList").selectedValues()[0]}}})(jQuery)});