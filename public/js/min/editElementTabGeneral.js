$(document).ready(function(){(function(a){a.TabGeneral={init:function(b){a.TabGeneral.initComponents();a.TabGeneral.createModifyFunction("#elementId","id",b);a.TabGeneral.createModifyFunction("#elementName","name",b);a.TabGeneral.createModifyFunction("#elementOrder","order",b);a.TabGeneral.createModifyFunction("#elementLabel","label",b);a.TabGeneral.createModifyFunction("#elementDescription","description",b);a.TabGeneral.createModifyFunction("#elementValue","value",b);a.TabGeneral.createModifyFunction("#elementRequired",
"required",b);a.TabGeneral.createModifyFunction("#elementAllowEmpty","allowEmpty",b);a.TabGeneral.loadElementAttribs(b)},initComponents:function(){a("#generalArea #addAttributeButton").click(function(b){a.TabGeneral.addAttributeButtonClick(b)});a("#generalArea #attribValue").keyup(function(b){b.keyCode=="13"&&a.TabGeneral.addAttributeButtonClick(b)});a("#generalArea #attribName").keyup(function(b){b.keyCode=="13"&&a.TabGeneral.addAttributeButtonClick(b)})},getElementId:function(){return a("#generalArea input:disabled#elementId").val()},
createModifyFunction:function(b,d,c){var e=c.id,h=a.ElementManager.getFormFilename(),c=typeof c[d]!="undefined"?c[d]:"";c.length==null&&(c="");a(b).attr("type")=="checkbox"?a(b).attr("checked",c!="false"):a(b).val(c);a(b).unbind();a(b).bind("change",function(){var c=a(this).attr("type")=="checkbox"?a(this).is(":checked"):a(this).val(),c={id:e,newValue:c,property:d,formFilename:h};a(b).parent().parent().children(".description").html(a.ZFM.images.filedUpdateInProgress);a.ajaxCalls.updateElementValue(c,
a(b))})},updateElementValueCallback:function(b,d,c){c.parent().parent().children(".description").html(a.ZFM.images.fieldUpToDate);a.ElUpdateManager.refreshElement(b,d)},loadElementAttribs:function(b){var d=b.attribs;a.TabGeneral.clearAttributes();if(typeof d!="undefined")for(var c in d)a.TabGeneral.addEditAttribute(b.id,c,d[c])},addAttributeButtonClick:function(b){b.stopPropagation();b.stopImmediatePropagation();var d=a.ElementManager.getFormFilename(),c=a.TabGeneral.getElementId(),b=jQuery.trim(a("#generalArea #attributEditLine #attribName").val()),
e=jQuery.trim(a("#generalArea #attributEditLine #attribValue").val()),d={formFilename:d,id:c,name:b,value:e};b.length>0?a.ajaxCalls.addEditElementAttribute(d):a.Tools.alert("Incorrect values","Please fulfill the name")},addEditAttribute:function(b,d,c){var e=function(){a("#generalArea #attributEditLine #attribName").val(d);a("#generalArea #attributEditLine #attribValue").val(c)},h=function(){if(confirm("Do you really want to delete the attribute "+d+" ?")){a(this).parent().parent().remove();var c=
{formFilename:a.ElementManager.getFormFilename(),id:b,name:d};a.ajaxCalls.deleteElementAttribute(c)}},f=null;a("#generalArea #elementAttributes").children().children().children(".attName").each(function(){a(this).text()==d&&(f=a(this).parent().parent())});if(f!=null)f.children().children(".attValue").html(c),f.children(".datasArea").unbind().click(e),f.children().children(".attribDelete").unbind().click(h);else{var g=a.TabGeneral.getDefAttribute();g.children(".datasArea").click(e);g.children().children(".attName").html(d);
g.children().children(".attValue").html(c);g.children().children(".attribDelete").click(h);a("#generalArea #elementAttributes").append(g)}},getDefAttribute:function(){return a(a("#generalArea #attribDefaultLine").clone().html())},clearAttributes:function(){a("#generalArea #elementAttributes").children(".attrib").remove()}}})(jQuery)});