$(document).ready(function(){(function(a){a.TabValidators={init:function(b){a.TabValidators.disableTab();a.ajaxCalls.getValidatorsFileInput({},b["@attributes"].type);a.TabValidators.fillSelectedValidators(typeof b.validators!="undefined"?b.validators:null);a.TabValidators.initComponents()},initComponents:function(){a(".validatorsHelpDialog").dialog({autoOpen:!1,width:400,height:400});a("#dialogForm #validatorsArea #config .validatorHelper img").click(function(){a(".validatorsHelpDialog").dialog("open")});
a("input#validatorMsgError").unbind().change(function(){a.TabValidators.updateValidatorValue("errorMessage",a(this))});a("input#validatorBCOF").unbind().change(function(){a.TabValidators.updateValidatorValue("bcof",a(this))});a("#addValidatorButton").unbind().click(function(){a.TabValidators.addSelectedValidator()});a("#deleteValidatorButton").unbind().click(function(){a.TabValidators.removeSelectedValidator()});a("#validatorConstruct").unbind().autocomplete({minLength:0,autoFocus:!0,source:[],change:function(){a.TabValidators.updateValidatorValue("constructor",
a(this))}}).keyup(function(b){if(b.keyCode=="13")return b.preventDefault(),a("#validatorConstruct").blur(),null})},fillHelpDialog:function(b){if(typeof b.help=="undefined")return a(".validatorsHelpDialog").html("There is no specific help for this validaror."),!1;if(b.help.options instanceof Array==!1){var c=[];c.push(b.help.options)}else c=b.help.options;for(var b="",d=0;d<c.length;d++){b+="<fieldset><legend>"+c[d]["@attributes"]["for"]+"</legend>";for(var e=0;e<c[d].option.length;e++)b+=c[d].option[e]+
"<br/>";b+="</fieldset>"}a(".validatorsHelpDialog").html(b);return!0},enableDisableFileValidators:function(b,c){for(var d in b)a("select#addValidator option:contains("+b[d]+")").prop("disabled",c!="file")},fillSelectedValidators:function(b){if(b!=null&&typeof b.validator!="undefined"){b.validator.length>1?b=b.validator:b[0]=b.validator;for(var c in b)a.TabValidators.addSelectedValidatorCallback(b[c])}},fillTab:function(b){b={name:b.name,knownDatas:b};typeof b.name!="undefined"?a.ajaxCalls.getValidatorDatas(b):
console.log("fillTab called without a classname ... there is probably no validator selected or something wierder.")},fillTabCallback:function(b,c){for(var d in c)if(c[d].length==null||typeof c[d]=="undefined")c[d]="";a.TabValidators.fillHelpDialog(b);a("#validatorsArea #description #className").prop("href",b.link).text(c.name);a("#validatorsArea #validatorConstruct").val(c.constructor);a("#validatorsArea #validatorMsgError").val(c.errorMessage);a("#validatorsArea #validatorBCOF").prop("checked",c.bcof!=
"false");a("#validatorsArea #description #classDescription").text(b.desc);typeof b.codes=="undefined"||typeof b.codes.code=="undefined"?a("#validatorsArea #validatorConstruct").autocomplete("option","source",[]):(b.codes.code instanceof Array?d=b.codes.code:(d=[],d[0]=b.codes.code),a("#validatorsArea #validatorConstruct").autocomplete("option","source",d))},addSelectedValidator:function(){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a("select#addValidator").val()};
a(a.ZFM.selectors.validatorSelected).containsOption(b.name)||a.ajaxCalls.addValidator(b)},addSelectedValidatorCallback:function(b){var c=a(a.ZFM.selectors.validatorSelected+":has(option)").length==0;c&&a.TabValidators.enableTab();a("select#addValidator option:contains("+b.name+")").prop("disabled",!0);a(a.ZFM.selectors.validatorSelected).addOption(b.name,b.name,!1);var d=a(a.ZFM.selectors.validatorSelected+" option:last");d.click(function(){a.TabValidators.fillTab(b)});c&&d.prop("selected",!0).click()},
removeSelectedValidator:function(){if(a(a.ZFM.selectors.validatorSelected).selectedOptions().length==1){var b={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a(a.ZFM.selectors.validatorSelected).val()};a.ajaxCalls.removeValidator(b)}},removeSelectedValidatorCallback:function(b){a(a.ZFM.selectors.validatorSelected).removeOption(b.name);a("select#addValidator option:contains("+b.name+")").prop("disabled",!1);a(a.ZFM.selectors.validatorSelected+":has(option)").length==
0?a.TabValidators.disableTab():a(a.ZFM.selectors.validatorSelected+" option:last").prop("selected",!0).focus().click()},updateValidatorValue:function(b,c){var d=c.prop("type")=="checkbox"?c.is(":checked"):c.val(),d={formFilename:a.ElementManager.getFormFilename(),id:a.TabGeneral.getElementId(),name:a.TabValidators.getClassName(),propertyName:b,propertyValue:d};c.parent().parent().children(".description").html(a.ZFM.images.filedUpdateInProgress);a.ajaxCalls.updateValidatorValue(d,c)},updateValidatorValueCallback:function(b){b.parent().parent().children(".description").html(a.ZFM.images.fieldUpToDate)},
disableTab:function(){a(a.ZFM.selectors.validatorSelected).html("");a("select#addValidator option:not(:contains('Zend_Validate_File'))").removeAttr("disabled");a("#validatorsArea #description #className").text("Zend_Validate_Class");a("#validatorsArea #description #classDescription").text("Please select a validator");a("#validatorsArea #validatorConstruct").val("");a("#validatorsArea #validatorMsgError").val("");a("#validatorsArea #validatorBCOF").prop("checked",!1);a("#validatorsArea #validatorConstruct").prop("disabled",
!0);a("#validatorsArea #validatorMsgError").prop("disabled",!0);a("#validatorsArea #validatorBCOF").prop("disabled",!0)},enableTab:function(){a("#validatorsArea #validatorConstruct").prop("disabled",!1);a("#validatorsArea #validatorMsgError").prop("disabled",!1);a("#validatorsArea #validatorBCOF").prop("disabled",!1)},getClassName:function(){return a(a.ZFM.selectors.validatorSelected).selectedValues()[0]}}})(jQuery)});